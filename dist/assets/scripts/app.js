(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}function r(t){var e="function"==typeof Map?new Map:void 0;return r=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(o())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var c=new(t.bind.apply(t,r));return n&&i(c,n.prototype),c}(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),i(n,t)},r(t)}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(o=function(){return!!t})()}function i(t,e){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},i(t,e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}var a=function(n){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)}(l,n);var r,a,u=function(e){var n=o();return function(){var r,o=c(e);if(n){var i=c(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(e,n){if(n&&("object"==t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e)}(this,r)}}(l);function l(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),(e=u.call(this)).renderHook=document.getElementById(t),e.cssClasses="ui striped three column green very compact small single line table",e.innerHTML="\n      <h2>Active Transactions</h2>\n    ",e}return r=l,(a=[{key:"render",value:function(t){if(0===t.length)return this.innerHTML+="\n        <p>All Transactions Have Been Archived</p>\n      ",void this.renderHook.appendChild(this);t.sort(function(t,e){return Date.parse(e.enteredDate)-Date.parse(t.enteredDate)});var e=document.createElement("table");e.classList=this.cssClasses;var n=document.createElement("tbody");t.forEach(function(t){var e=new Date(t.enteredDate),r=(1+e.getMonth()).toString().padStart(2,"0"),o=e.getDate().toString().padStart(2,"0"),i=e.getFullYear();n.innerHTML+='\n        <tr>\n          <td>\n            <i class="green money bill alternate outline icon"></i>\n            '.concat(t.merchantName," - ").concat(r,"/").concat(o,"/").concat(i,'\n          </td>\n          <td>\n            <i class="green user alternate outline icon"></i>\n            ').concat(t.purchaser," - $").concat(t.amount.toFixed(2),"\n          </td>\n        </tr>")}),e.append(n),this.appendChild(e),this.renderHook.appendChild(this)}}])&&e(r.prototype,a),Object.defineProperty(r,"prototype",{writable:!1}),l}(r(HTMLElement));function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return s(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function p(t){var e=function(t){if("object"!=u(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==u(e)?e:e+""}function d(t){var e="function"==typeof Map?new Map:void 0;return d=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(h())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&y(o,n.prototype),o}(t,arguments,m(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),y(n,t)},d(t)}function h(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(h=function(){return!!t})()}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}customElements.define("recent-transactions-table",a);var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}(o,t);var e,n,r=function(t){var e=h();return function(){var n,r=m(t);if(e){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==u(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).renderHook=document.getElementById(t),e}return e=o,n=[{key:"render",value:function(t){var e=l(t.entries()).reduce(function(t,e){return e[1].transactionTotal>t[1].transactionTotal?e:t}),n=l(t.entries()).reduce(function(t,e){return e[1].transactionTotal<t[1].transactionTotal?e:t}),r=[];if(t.forEach(function(t){r.push(t.transactionTotal)}),r.every(function(t,e,n){return t===n[0]}))return this.innerHTML='\n        <h2 style="margin:0">\n          We\'re Even!\n        </h2>\n        <h3 style="margin-top:4px">\n          <i class="green thumbs up outline icon"></i>\n        </h3>',void this.renderHook.appendChild(this);this.innerHTML='\n      <h2 style="margin:0">\n        '.concat(n[0],'\n        <i class="right green triangle icon"></i>\n        ').concat(e[0],'\n      </h2>\n      <h3 style="margin-top:4px">\n        <i class="green money bill alternate icon"></i>\n        $').concat((e[1].transactionTotal-n[1].transactionTotal).toFixed(2),"\n      </h3>\n    "),this.renderHook.appendChild(this)}}],n&&f(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(d(HTMLElement));function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function w(t){var e=function(t){if("object"!=v(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v(e)?e:e+""}function S(t){var e="function"==typeof Map?new Map:void 0;return S=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(T())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&E(o,n.prototype),o}(t,arguments,O(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),E(n,t)},S(t)}function T(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(T=function(){return!!t})()}function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}function O(t){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},O(t)}customElements.define("tally-section",b);var j=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&E(t,e)}(o,t);var e,n,r=function(t){var e=T();return function(){var n,r=O(t);if(e){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).renderHook=document.getElementById(t),e.innerHTML='\n      <div class="ui basic modal">\n        <div class="ui icon header"></div>\n        <div class="ui content" style="text-align: center"></div>\n        <div class="actions" style="text-align: center"></div>\n      </div>\n    ',e}return e=o,(n=[{key:"init",value:function(){this.renderHook.appendChild(this)}},{key:"setError",value:function(t){this.querySelector(".header").innerHTML='\n      <i class="orange exclamation triangle icon"></i>\n      There Was A Problem!\n    ',this.querySelector(".content").innerHTML="\n      <p>".concat(t,"</p>\n    "),this.querySelector(".actions").innerHTML='\n      <div class="ui orange ok inverted button">\n        <i class="checkmark icon"></i>\n        Go Back\n      </div>\n    '}},{key:"setConfirm",value:function(t,e){this.querySelector(".header").innerHTML='\n      <i class="green question circle outline icon"></i>\n      Submit the Following Transaction?\n    ',this.querySelector(".content").innerHTML='\n      <h3 style="color: var(--semantic-green)">Payee: '.concat(t,"</h3>\n      <p><strong>Merchant: </strong>").concat(e.merchantName,"</p>\n      <p><strong>Amount: </strong>$").concat(e.amount.toFixed(2),"</p>\n      <p><strong>Card: </strong>").concat(e.cardId,"</p>\n    "),this.querySelector(".actions").innerHTML='\n      <div class="ui red basic cancel inverted button">\n        <i class="remove icon"></i>\n        Cancel\n      </div>\n      <div class="ui green ok inverted button">\n        <i class="checkmark icon"></i>\n        Submit\n      </div>\n    '}}])&&g(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(S(HTMLElement));customElements.define("basic-modal",j);var M=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cardId=e,this.merchantName=n,this.amount=r};function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,k(r.key),r)}}function k(t){var e=function(t){if("object"!=P(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==P(e)?e:e+""}function _(t){var e="function"==typeof Map?new Map:void 0;return _=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(L())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&H(o,n.prototype),o}(t,arguments,A(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),H(n,t)},_(t)}function L(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(L=function(){return!!t})()}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}function A(t){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},A(t)}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(o,t);var e,n,r=function(t){var e=L();return function(){var n,r=A(t);if(e){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){if(e&&("object"==P(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n)}}(o);function o(t,e,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(i=r.call(this)).API_URI=t,i.authToken=sessionStorage.getItem("wow-token"),i.appModal=e,i.renderHook=document.getElementById(n),i.innerHTML='\n      <h2>Transaction Details</h2>\n      <form class="ui form">\n        <div class="field" id="merchant-select-field">\n          <select\n            name="merchant-select"\n            id="merchant-select"\n            class="ui search loading dropdown"\n          >\n            <option value="">Select Merchant</option>\n          </select>\n        </div>\n        <div class="display-hidden field" id="new-merchant-field">\n          <div class="ui fluid left icon input">\n            <input placeholder="Merchant Name" id="new-merchant-input" />\n            <i class="cart plus icon"></i>\n          </div>\n        </div>\n        <div class="field">\n          <button class="ui green basic button" id="merchant-toggle-btn">\n            <i class="green cart plus icon"></i>\n            New Merchant\n          </button>\n        </div>\n        <div class="field">\n          <div class="ui labeled fluid input">\n            <label for="amount-input" class="ui label">$</label>\n            <input\n              type="text"\n              name="amount-input"\n              id="amount-input"\n              inputmode="decimal"\n              placeholder="Amount"\n            />\n          </div>\n        </div>\n      </form>\n      <section class="ui green center aligned segment">\n        <h2>Select Card</h2>\n        <div class="spaced" id="submit-btn-section"></div>\n      </section>\n    ',i.merchantSelectField=i.querySelector("#merchant-select-field"),i.merchantSelect=i.querySelector("#merchant-select"),i.newMerchantField=i.querySelector("#new-merchant-field"),i.newMerchantInput=i.querySelector("#new-merchant-input"),i.merchantToggleBtn=i.querySelector("#merchant-toggle-btn"),i.amountInput=i.querySelector("#amount-input"),i.submitBtnSection=i.querySelector("#submit-btn-section"),i}return e=o,n=[{key:"render",value:function(t,e){var n=this;t.sort(function(t,e){var n=t.name.toUpperCase(),r=e.name.toUpperCase();return n<r?-1:n>r?1:0}),t.forEach(function(t){var e=document.createElement("option");e.setAttribute("value",t.name),e.innerText=t.name,n.merchantSelect.appendChild(e)}),this.merchantToggleBtn.addEventListener("click",function(t){t.preventDefault(),n.merchantSelectField.classList.toggle("display-hidden"),n.merchantSelect.value=null,n.merchantSelect.parentElement.childNodes[3].classList.add("default"),n.merchantSelect.parentElement.childNodes[4].childNodes.forEach(function(t){return t.classList.remove("active","selected")}),n.merchantSelect.parentElement.childNodes[3].innerText="Select Merchant",n.newMerchantField.classList.toggle("display-hidden"),n.newMerchantInput.value=null,n.merchantSelectField.classList.contains("display-hidden")?n.merchantToggleBtn.innerHTML='\n          <i class="shopping cart icon"></i>\n          Existing Merchant\n        ':n.merchantToggleBtn.innerHTML='\n        <i class="cart plus icon"></i>\n          New Merchant\n        '}),e.forEach(function(t){var e=document.createElement("button");e.classList="ui green button card-btn",e.dataset.cardId=t.id,e.dataset.cardholder=t.cardholder,e.dataset.cardholderInitials=t.cardholderInitials,e.innerHTML='<i class="credit card outline icon"></i> '.concat(t.id," (").concat(t.cardholderInitials,")"),n.submitBtnSection.appendChild(e),e.addEventListener("click",function(t){var e=n.newMerchantInput.value?n.newMerchantInput.value:n.merchantSelect.value;try{if(!e)throw new Error("Missing Merchant");if(!n.amountInput.value)throw new Error("Missing Amount");var r=+(+n.amountInput.value).toFixed(2);if(isNaN(r))throw new Error("Amount Is Not A Number");if(!r>0)throw new Error("Amount Must Be More Than $0");if(!t.currentTarget.dataset.cardId)throw new Error("Missing Card ID");var o=t.target.dataset.cardholder,i=new M(t.currentTarget.dataset.cardId,e,r);n.appModal.setConfirm(o,i),$(n.appModal.children[0]).modal({closable:!1,detachable:!1,duration:200,onApprove:function(){fetch("".concat(n.API_URI,"/transactions"),{method:"POST",headers:{Authorization:"Bearer ".concat(n.authToken),"Content-Type":"application/json"},body:JSON.stringify(i)}).then(function(t){location.reload()}).catch(function(t){n.basicModal.setError(t.message),$(n.appModal.children[0]).modal({closable:!1,detachable:!1,duration:200}).modal("show")})}}).modal("show")}catch(t){n.appModal.setError(t.message),$(n.appModal.children[0]).modal({closable:!1,detachable:!1,duration:200}).modal("show")}})}),$(this.merchantSelect).dropdown(),this.renderHook.appendChild(this),this.merchantSelect.parentElement.classList.remove("loading")}}],n&&I(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(_(HTMLElement));function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R(r.key),r)}}function R(t){var e=function(t){if("object"!=B(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==B(e)?e:e+""}customElements.define("transaction-form",C),(new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.API_URI="https://who-owes-who-api-373801.uk.r.appspot.com/api",this.authToken=sessionStorage.getItem("wow-token"),this.merchantList=[],this.cardList=[],this.recentTransactions=[],this.tally=new Map,this.loadingMessage=document.getElementById("loading-message"),this.basicModal=new j("basic-modal"),this.tallySection=new b("tally-section"),this.transactionForm=new C(this.API_URI,this.basicModal,"transaction-form"),this.recentTransactionsTable=new a("recent-transactions")}var e,n;return e=t,(n=[{key:"init",value:function(){var t=this;this.basicModal.init();var e=new Promise(function(e,n){fetch("".concat(t.API_URI,"/transactions"),{method:"GET",headers:{Authorization:"Bearer ".concat(t.authToken)}}).then(function(t){return 401===t.status&&n(t),t.json()}).then(function(n){n.forEach(function(e){t.tally.has(e.cardholder)||t.tally.set(e.cardholder,{transactionTotal:0}),e.transactions.forEach(function(n){n.purchaser=e.cardholder,t.recentTransactions.push(n),t.tally.get(e.cardholder).transactionTotal+=n.amount})}),e()}).catch(function(t){n(),console.log(t)})}),n=new Promise(function(e,n){fetch("".concat(t.API_URI,"/merchants"),{method:"GET",headers:{Authorization:"Bearer ".concat(t.authToken)}}).then(function(t){return 401===t.status&&n(t),t.json()}).then(function(n){n.forEach(function(e){t.merchantList.push(e)}),e()}).catch(function(t){n(),console.log(t)})}),r=new Promise(function(e,n){fetch("".concat(t.API_URI,"/cards"),{method:"GET",headers:{Authorization:"Bearer ".concat(t.authToken)}}).then(function(t){return 401===t.status&&n(t),t.json()}).then(function(n){n.forEach(function(e){t.cardList.push(e)}),e()}).catch(function(t){n(),console.log(t)})});Promise.all([e,n,r]).then(function(){t.loadingMessage.classList.add("display-hidden"),t.tallySection.render(t.tally),t.transactionForm.render(t.merchantList,t.cardList),t.recentTransactionsTable.render(t.recentTransactions)}).catch(function(t){401===t.status?window.location="".concat(window.origin,"/auth"):console.log(t)})}}])&&x(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())).init()})();